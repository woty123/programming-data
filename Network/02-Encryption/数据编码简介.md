# 数据编码

## 1 Base64

Base64 是网络上最常见的用于传输 8Bit 字节码的编码方式之一，Base64 就是一种基于 64 个可打印字符来表示二进制数据的方法，Base64 编码可以把任何的字节变为可见字符串。算法：`3字节---->4字节`

```log
//原始字节3个字节
1101 1100 0101 1010 1101 0101

//3*8/4 = 6，三个字节按6拆分，前面补0
//每个字节表示的范围：00 000000~00 111111   :0~63共64个整数
0011 0111 0000 0101 0010 1011 0001 0101
```

Base64 的主要用途：

- 让原数据具有字符串串所具有的特性，如可以放在 URL 中传输、可以保存到⽂本⽂件、可以通过普通的聊天软件进行⽂本传输。
- 把原本人眼可以读懂的字符串变成读不不懂的字符串，降低偷窥⻛风险。

Base64 加密传输图片，可以更安全和高效吗？

- 安全只能依靠加密。
- Base64 后的数据比原始数据长了（数据会增大约 1/3），所以是更低效的。

实际上 Base64 是一个基础码表，一般对数据进行摘要后，都会使用 Base64 将摘要后的二进制转换为字符串：

```java
    public static String md5(String str){
        try {
            MessageDigest md = MessageDigest.getInstance("MD5");
            //不一定对应着字符串
            byte b[] = md.digest(str.getBytes());
            //Base64编码：可以把任何的字节变为可见字符串
            return new BASE64Encoder().encode(b);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
```

Base64 变种：

- Base58，用于比特币。
- URL encoding
  - 在 URL 的字符串中，对一些不用于特殊用途的保留字符，使⽤百分号 "%" 为前缀进行单独编码，以避免出现解析错误。
  - 目的：消除歧义，避免解析错误，将 URL 中具有特定含义的字符转换为其他普通字符

## 2 压缩与解压

- 压缩：把数据换一种⽅式来存储，以减小存储空间。
- 解压：把压缩后的数据还原成原先的形式，以便使用
- 常见压缩算法：DEFLATE、JPEG、MP3
- 压缩属于编码吗？
  - 编码没有官方的定义，总得来说就是将数据转为另一种形式，后续也可以将其转换回来。
  - 所以压缩与解压也属于编码。

## 3 媒体数据的编解码

- 图片的编码：把图像数据写成 JPG、PNG 等文件的编码格式。
- 图片的解码：把 JPG、PNG 等文件中的数据解析成标准的图像数据。
- 音频、视频的编解码类似

## 4 序列化

- 序列化：把数据对象一般是内存中的，如 JVM 中的对象）转换成节序列的过程。
- 反序列化：把字序列列重新转换成内存中的对象。
- 目的：让内存中的对象可以被存储和传输。
- 序列化严格来说不是编码

## 5 hash

- 定义：**把任意数据转换成指定大小范围（通常很小）的数据**。
- 作⽤：摘要、数字指纹
- 经典算法：`MD5、SHA1、SHA256` 等
- 实际⽤途
  - 数据完整性验证，比如网址提供的下载文件一般会提供该文件的 hash 值。
  - 快速查找：`hashCode() 和 HashMap`
  - 隐私保护，避免明文传输
- hash 不属于编码，hash 过程不可逆。
- MD5 不是加密，加密必然是存在解密的。

## 6 字符集

- 含义：⼀个由整数向现实世界中的⽂字符号的 Map。
- 分⽀：
  - ASCII：128 个字符，1 字节
  - ISO-8859-1：对 ASCII 进行扩充，1 字节
  - Unicode：13 万个字符，多字节
    - UTF-8：Unicode 的编码分支
    - UTF-16 ：Unicode 的编码分⽀
    - UTF-8 和 UTF-16 的字符集是相同的，但是编码方式不同。
  - GBK / GB2312 / GB18030：中国⾃研标准，多字节，字符集 + 编码
